<div class="w-full border-t leading-[1.2]">
    <div class="py-3 flex justify-between items-center cursor-pointer" @onclick="ToggleContent">
        <h2 class="text-3xl">@Title</h2>
        <button class="transition">
            <span class="text-3xl">@(isExpanded ? "âˆ’" : "+")</span>
        </button>
    </div>
    <div id="@Id" class="accordion-child-content overflow-hidden h-0 space-y-3">
        <div class="py-3">
            @ChildContent
        </div>
    </div>
</div>

@code {
    [Inject]
    private IJSRuntime JS { get; set; }
    private bool isExpanded = false;
    [Parameter]
    public string Id { get; set; } = ToShortGuid(Guid.NewGuid());
    [Parameter]
    public string Title { get; set; } = "[Undefined]";
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    public static string ToShortGuid(Guid guid)
    {
        string encoded = Convert.ToBase64String(guid.ToByteArray());
        return encoded.Replace("/", "_").Replace("+", "-").TrimEnd('=');
    }
    private void ToggleContent()
    {
        isExpanded = !isExpanded;

        if (isExpanded)
            JS.InvokeVoidAsync("expandAccordion", Id);
        else
            JS.InvokeVoidAsync("collapseAccordion", Id);
    }
}
